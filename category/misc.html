<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>disparate notes - misc</title>
        <link rel="stylesheet" href="https://avolkov.github.io/theme/css/main.css" />
        <link href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="disparate notes Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://avolkov.github.io/">disparate notes </a></h1>
                <nav><ul>
                    <li><a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a></li>
                    <li class="active"><a href="https://avolkov.github.io/category/misc.html">misc</a></li>
                    <li><a href="https://avolkov.github.io/category/testing.html">testing</a></li>
                    <li><a href="https://avolkov.github.io/category/tools.html">tools</a></li>
                    <li><a href="https://avolkov.github.io/category/web-application-development.html">web application development</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://avolkov.github.io/upgrading-from-old-version-of-gitlab-ce.html">Upgrading from old version of Gitlab CE</a></h1>
<footer class="post-info">
        <abbr class="published" title="2018-02-21T00:00:00-05:00">
                Published: Wed 21 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/git.html">git</a> <a href="https://avolkov.github.io/tag/gitlab.html">gitlab</a> </p>
</footer><!-- /.post-info --><p>I've came across an old instance of Gitlab running on CentOS 6.</p>
<p>The old instance version is 8.10.5 installed using omnibus package. The omnibus package contains Postgres database, which needs to be updated from 9.2.x used in 8.10 release to 9.6.x used in the current Gitlab 10.4.4.</p>
<p>The documentation is not entirely complete, as I be not many people are running Gitlab instance from 2015 that hasn't been updated. There are few mentions of  <cite>gitlab-ctl pg-upgrade</cite> command but the command is not available in Gitlab 8.10.5, trying to run that will provoke gitlab-ctl to give the following response -- &quot;i don't know that command&quot;</p>
<p>What I eventually figured out, and what needs to be done is to update to version 9.5.10 first -- that would update included postgres to 9.6.x</p>
<div class="highlight"><pre><span></span><span class="c1"># yum install gitlab-ce-9.5.10-ce.0.el6.x86_64.rpm</span>
</pre></div>
<p>Then update gitlab to the latest version.</p>
<div class="highlight"><pre><span></span><span class="c1"># yum install gitlab-ce</span>
</pre></div>
<div class="section" id="additional-notes">
<h2>Additional notes</h2>
<p>If you need to test backups for an old version of Gitlab, you can download and install that version of the package from here -- <a class="reference external" href="https://packages.gitlab.com/app/gitlab/gitlab-ce/search?filter=rpms&amp;q=gitlab-ce-8.10&amp;dist=">https://packages.gitlab.com/app/gitlab/gitlab-ce/search?filter=rpms&amp;q=gitlab-ce-8.10&amp;dist=</a></p>
<p>The package description for the specific package I'm using is here -- <a class="reference external" href="https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-8.10.5-ce.0.el6.x86_64.rpm">https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-8.10.5-ce.0.el6.x86_64.rpm</a></p>
<p>The page also contains installation instructions. Once download and install is finished, run reconfigure script.</p>
<div class="highlight"><pre><span></span><span class="c1"># gitlab-ctl reconfigure</span>
</pre></div>
<p>The script will create the location <strong>/var/opt/gitlab/backups/</strong> into which Gitlab backup files should be copied</p>
<p>Restore gitlab from backup using the following command</p>
<div class="highlight"><pre><span></span><span class="c1"># gitlab-rake gitlab:backup:restore</span>
</pre></div>
<p>Then reboot the system. This should get you to the point where it is possible to test Gitlab upgrade process.</p>
</div>
<div class="section" id="gpg-error">
<h2>GPG error</h2>
<p>Older version of Gitlab ship with unsigned packages and <strong>yum install</strong> command would refuse to run returning this error message -- &quot;Package is not signed&quot;.</p>
<p>A workaround is to set <strong>gpgcheck=0</strong> in <strong>/etc/yum.repos.d/gitlab_gitlab-ce.repo</strong></p>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/linting-and-declaration-lookup-for-python-with-sublime-text-3.html" rel="bookmark"
                           title="Permalink to Linting and declaration lookup for Python with Sublime Text 3">Linting and declaration lookup for Python with Sublime Text 3</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-23T22:18:00-04:00">
                Published: Sun 23 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/sublime.html">sublime</a> <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/anaconda.html">anaconda</a> <a href="https://avolkov.github.io/tag/programming.html">programming</a> <a href="https://avolkov.github.io/tag/debian.html">debian</a> </p>
</footer><!-- /.post-info -->                <p>Recently I had to completely reset my Sublime Text 3 project settings and set everything up from scratch. I find the following two features the most important and need to be configured first:</p>
<ul class="simple">
<li>linting -- letting the computer keep track of consistent coding style</li>
<li>definition lookup -- letting the computer to look ...</li></ul>
                <a class="readmore" href="https://avolkov.github.io/linting-and-declaration-lookup-for-python-with-sublime-text-3.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/debian-automated-install.html" rel="bookmark"
                           title="Permalink to Debian Automated Install">Debian Automated Install</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-17T21:44:00-04:00">
                Published: Mon 17 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/debian.html">debian</a> <a href="https://avolkov.github.io/tag/automation.html">automation</a> <a href="https://avolkov.github.io/tag/preseeding.html">preseeding</a> </p>
</footer><!-- /.post-info -->                <p>A few days ago in my part of the talk at GTALUG <a class="footnote-reference" href="#id7" id="id1">[1]</a>  I mentioned using Debian automated install <a class="footnote-reference" href="#id8" id="id2">[2]</a> to quickly bring up fully virtualized systems, as one of possible methods of system deployment or testing Ansible scripts.</p>
<p>This idea worked so well that I made a youtube video ...</p>
                <a class="readmore" href="https://avolkov.github.io/debian-automated-install.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/hello.html" rel="bookmark"
                           title="Permalink to Hello world">Hello world</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-09-29T22:01:00-04:00">
                Published: Thu 29 September 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/pelican.html">pelican</a> <a href="https://avolkov.github.io/tag/web.html">web</a> <a href="https://avolkov.github.io/tag/rst.html">rst</a> <a href="https://avolkov.github.io/tag/github.html">github</a> <a href="https://avolkov.github.io/tag/first.html">first</a> </p>
</footer><!-- /.post-info -->                <p>A one way of learning restructured test is to start writing all of the things
down using rst. <a class="reference external" href="http://docs.getpelican.com/en/3.3.0/getting_started.html">Pelican</a>
is a rather nice static site generator.</p>
<p>A short tutorial on how to set up a blog with pelican, rst and github pages can be found
on <a class="reference external" href="http://www.circuidipity.com/pelican.html">Circuidipity</a>.</p>

                <a class="readmore" href="https://avolkov.github.io/hello.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/thursdays-raspberry-pi-meetup.html" rel="bookmark"
                           title="Permalink to Thursday's Raspberry Pi meetup">Thursday's Raspberry Pi meetup</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-17T22:01:00-05:00">
                Published: Sun 17 January 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/raspberrypi.html">raspberrypi</a> <a href="https://avolkov.github.io/tag/opencv.html">opencv</a> <a href="https://avolkov.github.io/tag/gardening.html">gardening</a> </p>
</footer><!-- /.post-info -->                <p>I went to <a class="reference external" href="http://www.meetup.com/Raspberry-Pi/">Raspberry Pi meetup</a> on Thursday, January 14, and would like to share some links about the presentation I gave and things I brought with me.</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://github.com/avolkov/rpi-opencv">Instructions on setting up OpenCV on Raspbian Jessie</a></li>
<li><a class="reference external" href="https://github.com/avolkov/my-first-automatic-door-man">My fork of Thiago's automatic doorman that works with PiCamera</a></li>
<li><a class="reference external" href="https://picamera.readthedocs.org/en/release-1.10/">Python library and ...</a></li></ol>
                <a class="readmore" href="https://avolkov.github.io/thursdays-raspberry-pi-meetup.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/fun-of-premature-optimization.html" rel="bookmark"
                           title="Permalink to Fun of premature optimization">Fun of premature optimization</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-09T00:00:00-05:00">
                Published: Sat 09 January 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/apache-logs.html">apache logs</a> <a href="https://avolkov.github.io/tag/regular-expressions.html">regular expressions</a> <a href="https://avolkov.github.io/tag/performance.html">performance</a> </p>
</footer><!-- /.post-info -->                <p>Last week I deployed a redesigned website that included a new search feature, looking at the server logs I've noticed that users of the site use search. A lot.</p>
<p>I wanted to know more about what kind of questions end-users were asking, so I wrote a short program to ...</p>
                <a class="readmore" href="https://avolkov.github.io/fun-of-premature-optimization.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/my-awesome-15k-mec-run.html" rel="bookmark"
                           title="Permalink to My awesome 15K MEC Run">My awesome 15K MEC Run</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-06T22:44:33-05:00">
                Published: Sun 06 December 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/running.html">running</a> </p>
</footer><!-- /.post-info -->                <p>These are my experiences from MEC Race Seven that happened on October 20, 2015. I posted this a while ago on EYTR page, now I finally got a couple of photos of it.</p>
<p>I'm still not sure how that's possible but I ran MEC 15K in 1:09 ...</p>
                <a class="readmore" href="https://avolkov.github.io/my-awesome-15k-mec-run.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/raspberry-pi-wireless-config.html" rel="bookmark"
                           title="Permalink to Raspberry Pi Wireless config">Raspberry Pi Wireless config</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-06T00:57:30-05:00">
                Published: Sun 06 December 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/raspberrypi.html">raspberrypi</a> <a href="https://avolkov.github.io/tag/networking.html">networking</a> <a href="https://avolkov.github.io/tag/wireless.html">wireless</a> <a href="https://avolkov.github.io/tag/realtek.html">realtek</a> <a href="https://avolkov.github.io/tag/ralink.html">ralink</a> <a href="https://avolkov.github.io/tag/usb.html">usb</a> </p>
</footer><!-- /.post-info -->                <p>Here's working wireless configuration I use to connect my Raspberry Pis with USB wifi dongles to my home network.</p>
<p>I've been using Realtek RTL8188CUS and Ralink RT5370 based devices rated for 150Mbps.</p>
<p>Dongles based on Ralink chip have been working flawlessly, but I have experienced two issues with ...</p>
                <a class="readmore" href="https://avolkov.github.io/raspberry-pi-wireless-config.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/a_volkov">twitter</a></li>
                            <li><a href="http://flamy.ca">homepage</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-87694404-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>