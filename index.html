<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>disparate notes</title>
        <link rel="stylesheet" href="https://avolkov.github.io/theme/css/main.css" />
        <link href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="disparate notes Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://avolkov.github.io/">disparate notes </a></h1>
                <nav><ul>
                    <li><a href="https://avolkov.github.io/category/ci.html">ci</a></li>
                    <li><a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a></li>
                    <li><a href="https://avolkov.github.io/category/misc.html">misc</a></li>
                    <li><a href="https://avolkov.github.io/category/programming.html">programming</a></li>
                    <li><a href="https://avolkov.github.io/category/testing.html">testing</a></li>
                    <li><a href="https://avolkov.github.io/category/tools.html">tools</a></li>
                    <li><a href="https://avolkov.github.io/category/video-editing.html">video editing</a></li>
                    <li><a href="https://avolkov.github.io/category/web-application-development.html">web application development</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://avolkov.github.io/kdenlive-nvenc-video-settings-for-youtube.html">Kdenlive nvenc video settings for Youtube</a></h1>
<footer class="post-info">
        <abbr class="published" title="2019-10-14T00:00:00-04:00">
                Published: Mon 14 October 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/video-editing.html">video editing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/kdenlive.html">kdenlive</a> <a href="https://avolkov.github.io/tag/video-editing.html">video editing</a> <a href="https://avolkov.github.io/tag/nvidia.html">nvidia</a> </p>
</footer><!-- /.post-info --><p>After numerous tryings in to follow codec settings for youtube <a class="footnote-reference" href="#id4" id="id1">[1]</a> in order to processing time after the video was uploaded, I've come up with the following Kdenlive settings for 1080p video using Nvidia hardware.</p>
<div class="highlight"><pre><span></span>f=mp4 vcodec=nvenc_h264 acodec=aac ab=384k g=15 profile:v=high global_quality=21 -coder 1 vq=21 -r 29.97 preset=slow bf=2 movflags=faststart pix_fmt=yuv420p
</pre></div>
<p>The thing these settings don't have is bitrate limit, however in the videos I've encoded, I didn't notice exceeding bitrate it always seem to be under 15Mbps.</p>
<p>Here's my rationale for each of these encoding options.</p>
<ul class="simple">
<li><strong>f=mp4</strong> use mp4 container</li>
<li><strong>vcodec=nvenc_h264</strong> utilize nvidia hardware acceleration</li>
<li><strong>acodec=aac ab=384k</strong> use AAC audio codec with bitrate 384k</li>
<li><strong>global_quality=21 -coder 1 vq=21 preset=slow</strong> following some of the recommendations from this stackoverflow answer on intricacies of nvidia encoder <a class="footnote-reference" href="#id5" id="id2">[2]</a></li>
<li><strong>-r 29.97</strong> use 29.97 FPS frame rate. This is the framerate I shoot the video with and this is the framerate I use to publish video. This will avoid recording light flickering effect in North America power grid.</li>
<li><strong>bf=2</strong> 2 consecutive B-frames (youtube recommendation)</li>
<li><strong>movflags=faststart</strong> youtube recoomendation (mp4 container), see additional discussion on superuser.com <a class="footnote-reference" href="#id6" id="id3">[3]</a></li>
<li><strong>pix_fmt=yuv420p</strong> pixel format/color encoding to use (youtube recommendation)</li>
</ul>
<div class="section" id="references">
<h2>References</h2>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><a class="reference external" href="https://support.google.com/youtube/answer/1722171?hl=en">Recommended upload encoding settings</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><a class="reference external" href="https://superuser.com/a/1296511/420376">Best settings for FFMpeg with NVENC</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td><a class="reference external" href="https://superuser.com/questions/856025/any-downsides-to-always-using-the-movflags-faststart-parameter">Any downsides to always using the -movflags faststart parameter?</a></td></tr>
</tbody>
</table>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/speeding-up-generation-of-kdenlive-proxies-with-nvenc.html" rel="bookmark"
                           title="Permalink to Speeding up generation of Kdenlive proxies with nvenc">Speeding up generation of Kdenlive proxies with nvenc</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-10-14T00:00:00-04:00">
                Published: Mon 14 October 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/video-editing.html">video editing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/kdenlive.html">kdenlive</a> <a href="https://avolkov.github.io/tag/video-editing.html">video editing</a> <a href="https://avolkov.github.io/tag/nvidia.html">nvidia</a> </p>
</footer><!-- /.post-info -->                <p class="first last">speedup proxies using nvenc</p>

                <a class="readmore" href="https://avolkov.github.io/speeding-up-generation-of-kdenlive-proxies-with-nvenc.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/fear-of-missing-out-as-a-business-model-for-facebook.html" rel="bookmark"
                           title="Permalink to Fear Of Missing Out as a business model for Facebook">Fear Of Missing Out as a business model for Facebook</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-11-22T16:50:00-05:00">
                Published: Thu 22 November 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/facebook.html">facebook</a> <a href="https://avolkov.github.io/tag/surveillance-capitalism.html">surveillance capitalism</a> </p>
</footer><!-- /.post-info -->                <p>I have written this post back in September, but didn't get arount to posting it now.</p>
<p>I  quit twitter back in September, when I finally I got convinced that twitter managed to find business model where they convert human misery into money.</p>
<p>I'm a member of the board of a …</p>
                <a class="readmore" href="https://avolkov.github.io/fear-of-missing-out-as-a-business-model-for-facebook.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/simple-threading-in-python-3.html" rel="bookmark"
                           title="Permalink to Simple threading in Python 3">Simple threading in Python 3</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-08-13T00:00:00-04:00">
                Published: Mon 13 August 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/programming.html">programming</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/multithreading.html">multithreading</a> </p>
</footer><!-- /.post-info -->                <p>I've been working in Python 3 on an an embarrassingly parallel task of parsing and importing data into Postgres. Once I've done single-threaded implementation I looked around for parallelizing the program and after a few tries I managed to get everything running in parallel.</p>
<p>This is a quick note on …</p>
                <a class="readmore" href="https://avolkov.github.io/simple-threading-in-python-3.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/quick-gitlab-runner-setup.html" rel="bookmark"
                           title="Permalink to Quick gitlab runner setup">Quick gitlab runner setup</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-05-01T00:00:00-04:00">
                Published: Tue 01 May 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/ci.html">ci</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/gitlab.html">gitlab</a> <a href="https://avolkov.github.io/tag/git.html">git</a> <a href="https://avolkov.github.io/tag/plone.html">plone</a> <a href="https://avolkov.github.io/tag/gitlab-ci.html">gitlab ci</a> <a href="https://avolkov.github.io/tag/ci.html">ci</a> </p>
</footer><!-- /.post-info -->                <p class="first last">gitlab-runner setup for simple ci configuration</p>

                <a class="readmore" href="https://avolkov.github.io/quick-gitlab-runner-setup.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/upgrading-from-old-version-of-gitlab-ce.html" rel="bookmark"
                           title="Permalink to Upgrading from old version of Gitlab CE">Upgrading from old version of Gitlab CE</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-21T00:00:00-05:00">
                Published: Wed 21 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/git-gitlab.html">git gitlab</a> </p>
</footer><!-- /.post-info -->                <p>I've came across an old instance of Gitlab running on CentOS 6.</p>
<p>The old instance version is 8.10.5 installed using omnibus package. The omnibus package contains Postgres database, which needs to be updated from 9.2.x used in 8.10 release to 9.6.x used in …</p>
                <a class="readmore" href="https://avolkov.github.io/upgrading-from-old-version-of-gitlab-ce.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/installing-python-packages-in-development-mode.html" rel="bookmark"
                           title="Permalink to Installing python packages in development mode">Installing python packages in development mode</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-01-02T00:00:00-05:00">
                Published: Mon 02 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/pip.html">pip</a> </p>
</footer><!-- /.post-info -->                <p class="first last">installing package requirements in development mode</p>

                <a class="readmore" href="https://avolkov.github.io/installing-python-packages-in-development-mode.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/pyramid-web-app-setup-with-with-postgres-sqlalchemy-and-alembic.html" rel="bookmark"
                           title="Permalink to Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.">Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-01-01T00:00:00-05:00">
                Published: Sun 01 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/web-application-development.html">web application development</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/pyramid.html">pyramid</a> <a href="https://avolkov.github.io/tag/postgres.html">postgres</a> <a href="https://avolkov.github.io/tag/sqlalchemy.html">sqlalchemy</a> <a href="https://avolkov.github.io/tag/alembic.html">alembic</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.</p>

                <a class="readmore" href="https://avolkov.github.io/pyramid-web-app-setup-with-with-postgres-sqlalchemy-and-alembic.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/grapical-tool-for-mercurial-similar-to-git-blame.html" rel="bookmark"
                           title="Permalink to Grapical tool for mercurial similar to git blame">Grapical tool for mercurial similar to git blame</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-12-17T00:00:00-05:00">
                Published: Sat 17 December 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/tools.html">tools</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/mercurial.html">mercurial</a> <a href="https://avolkov.github.io/tag/hg.html">hg</a> <a href="https://avolkov.github.io/tag/tools.html">tools</a> </p>
</footer><!-- /.post-info -->                <p class="first last">thg -- A handy GUI tool for looking up historical date</p>

                <a class="readmore" href="https://avolkov.github.io/grapical-tool-for-mercurial-similar-to-git-blame.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/testing-python-with-mock.html" rel="bookmark"
                           title="Permalink to Testing Python with Mock">Testing Python with Mock</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-12-17T00:00:00-05:00">
                Published: Sat 17 December 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/mock.html">mock</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Testing with mocks and less well know mock methods</p>

                <a class="readmore" href="https://avolkov.github.io/testing-python-with-mock.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 2
        <a href="https://avolkov.github.io/index2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://mastodon.xyz/@avolkov">mastodon</a></li>
                            <li><a href="http://flamy.ca">homepage</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-87694404-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>