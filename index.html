<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>disparate notes</title>
        <link rel="stylesheet" href="https://avolkov.github.io/theme/css/main.css" />
        <link href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="disparate notes Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://avolkov.github.io/">disparate notes </a></h1>
                <nav><ul>
                    <li><a href="https://avolkov.github.io/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://avolkov.github.io/debian-automated-install.html">Debian Automated Install</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-10-17T21:44:00-04:00">
                Published: Mon 17 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/debian-automation-preseeding.html">debian automation preseeding</a> </p>
</footer><!-- /.post-info --><p>A few days ago in my part of the talk at GTALUG <a class="footnote-reference" href="#id7" id="id1">[1]</a>  I mentioned using Debian automated install <a class="footnote-reference" href="#id8" id="id2">[2]</a> to quickly bring up fully virtualized systems, as one of possible methods of system deployment or testing Ansible scripts.</p>
<p>This idea worked so well that I made a youtube video out of it --</p>
<div class="youtube youtube-16x9"><iframe src="https://www.youtube.com/embed/WtIkKrkzPSw" allowfullscreen seamless frameBorder="0"></iframe></div><p>The video is based on the following: preseed file <a class="footnote-reference" href="#id9" id="id3">[3]</a> taken from kali linux preseed <a class="footnote-reference" href="#id10" id="id4">[4]</a> and gen_iso script <a class="footnote-reference" href="#id11" id="id5">[5]</a>, the latter is a distilled version EditIso instructions from Debian Wiki <a class="footnote-reference" href="#id12" id="id6">[6]</a></p>
<p>Example usage -- generating an ISO image based on an existing Debian ISO and a preseed.cfg:</p>
<div class="highlight"><pre><span></span>./gen_iso.sh -i debian-8.6.0-amd64-CD-1.iso -p presseed.cfg preseeded.iso
</pre></div>
<div class="section" id="discussion">
<h2>Discussion</h2>
<p>One major issue with writing automated install answers -- partitioning abilities are somewhat limited, and the scripts quickly grows in complexity for anything beyond simple one- or two- partition layout. If complex partition required, as in cases when installing Debian on bare hardware, it is possible omit answers to partition questions -- the installer will drop into interactive mode, where custom partition will be set up, once that part of the installation is finished, automated install will resume.</p>
</div>
<div class="section" id="creating-preseed-file">
<h2>Creating preseed file</h2>
<p>It is possible to just run a standard installation giving all the answers to the installer, once installation is over, the answers are retrieved using <em>debconf-get-selections</em> tool, a part of <em>debconf-utils</em> package.</p>
<div class="highlight"><pre><span></span><span class="c1"># debconf-get-selections --installer &gt; ${HOME}/preseed.cfg</span>
<span class="c1"># debconf-get-selections &gt;&gt; ${HOME}/preseed.cfg</span>
</pre></div>
<p>The first command important than the second as it generates answers to questions asked during installation, the second command generates all answers to any subsequent package configuration dialog (i.e. complex packages like Postfix, or Postgresql).</p>
<p>One possible issue that might arise in this scenario of generating configuration files -- automated install answers are work only for <em>standard</em> Debian installation, answers recorded in <em>expert</em> mode will cause errors like installation looping infinitely on one of the dialogs, or automated install dropping into regular install mode.</p>
<p>Another way of generating a preseed file, is to modify existing  minimal configuration.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>Debian automated install is a handy way of getting from bare metal to a running system that can be handed off to Ansible for further configuration. The point of automated install is to fill the niche Ansible currently not servicing, all further system modifications should be done with Ansible as automated install answers quickly become really complicated.</p>
</div>
<div class="section" id="sources">
<h2>Sources</h2>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>AGM and Ansible with Myles Braithwaite and Alex Volkov. <a class="reference external" href="https://gtalug.org/meeting/2016-10/">https://gtalug.org/meeting/2016-10/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td>Appendix B. Automating the installation using preseeding. <a class="reference external" href="https://www.debian.org/releases/jessie/i386/apbs02.html.en">https://www.debian.org/releases/jessie/i386/apbs02.html.en</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>A sample preseed file. <a class="reference external" href="https://github.com/myles/2016-10-11-ansible/blob/master/2-testing/03-debian-preseed/iso/preseed.cfg">https://github.com/myles/2016-10-11-ansible/blob/master/2-testing/03-debian-preseed/iso/preseed.cfg</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[4]</td><td>Kali linux preseed file. <a class="reference external" href="https://www.kali.org/dojo/preseed.cfg">https://www.kali.org/dojo/preseed.cfg</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[5]</td><td>gen_iso.sh script for creating ISO images with slipstreamed preseed files.  <a class="reference external" href="https://github.com/myles/2016-10-11-ansible/blob/master/2-testing/03-debian-preseed/iso/gen_iso.sh">https://github.com/myles/2016-10-11-ansible/blob/master/2-testing/03-debian-preseed/iso/gen_iso.sh</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[6]</td><td>Debian-Installer: How to modify an existing CD image to preseed d-i. <a class="reference external" href="https://wiki.debian.org/DebianInstaller/Preseed/EditIso">https://wiki.debian.org/DebianInstaller/Preseed/EditIso</a></td></tr>
</tbody>
</table>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/hello.html" rel="bookmark"
                           title="Permalink to Hello world">Hello world</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-09-29T22:01:00-04:00">
                Published: Thu 29 September 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/pelican.html">pelican</a> <a href="https://avolkov.github.io/tag/web.html">web</a> <a href="https://avolkov.github.io/tag/rst.html">rst</a> <a href="https://avolkov.github.io/tag/github.html">github</a> <a href="https://avolkov.github.io/tag/first.html">first</a> </p>
</footer><!-- /.post-info -->                <p>A one way of learning restructured test is to start writing all of the things
down using rst. <a class="reference external" href="http://docs.getpelican.com/en/3.3.0/getting_started.html">Pelican</a>
is a rather nice static site generator.</p>
<p>A short tutorial on how to set up a blog with pelican, rst and github pages can be found
on <a class="reference external" href="http://www.circuidipity.com/pelican.html">Circuidipity</a>.</p>

                <a class="readmore" href="https://avolkov.github.io/hello.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/thursdays-raspberry-pi-meetup.html" rel="bookmark"
                           title="Permalink to Thursday's Raspberry Pi meetup">Thursday's Raspberry Pi meetup</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-17T22:01:00-05:00">
                Published: Sun 17 January 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/raspberrypi.html">raspberrypi</a> <a href="https://avolkov.github.io/tag/opencv.html">opencv</a> <a href="https://avolkov.github.io/tag/gardening.html">gardening</a> </p>
</footer><!-- /.post-info -->                <p>I went to <a class="reference external" href="http://www.meetup.com/Raspberry-Pi/">Raspberry Pi meetup</a> on Thursday, January 14, and would like to share some links about the presentation I gave and things I brought with me.</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://github.com/avolkov/rpi-opencv">Instructions on setting up OpenCV on Raspbian Jessie</a></li>
<li><a class="reference external" href="https://github.com/avolkov/my-first-automatic-door-man">My fork of Thiago's automatic doorman that works with PiCamera</a></li>
<li><a class="reference external" href="https://picamera.readthedocs.org/en/release-1.10/">Python library and ...</a></li></ol>
                <a class="readmore" href="https://avolkov.github.io/thursdays-raspberry-pi-meetup.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/fun-of-premature-optimization.html" rel="bookmark"
                           title="Permalink to Fun of premature optimization">Fun of premature optimization</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-01-09T00:00:00-05:00">
                Published: Sat 09 January 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/apache-logs.html">apache logs</a> <a href="https://avolkov.github.io/tag/regular-expressions.html">regular expressions</a> <a href="https://avolkov.github.io/tag/performance.html">performance</a> </p>
</footer><!-- /.post-info -->                <p>Last week I deployed a redesigned website that included a new search feature, looking at the server logs I've noticed that users of the site use search. A lot.</p>
<p>I wanted to know more about what kind of questions end-users were asking, so I wrote a short program to ...</p>
                <a class="readmore" href="https://avolkov.github.io/fun-of-premature-optimization.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/my-awesome-15k-mec-run.html" rel="bookmark"
                           title="Permalink to My awesome 15K MEC Run">My awesome 15K MEC Run</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-06T22:44:33-05:00">
                Published: Sun 06 December 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/running.html">running</a> </p>
</footer><!-- /.post-info -->                <p>These are my experiences from MEC Race Seven that happened on October 20, 2015. I posted this a while ago on EYTR page, now I finally got a couple of photos of it.</p>
<p>I'm still not sure how that's possible but I ran MEC 15K in 1:09 ...</p>
                <a class="readmore" href="https://avolkov.github.io/my-awesome-15k-mec-run.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/raspberry-pi-wireless-config.html" rel="bookmark"
                           title="Permalink to Raspberry Pi Wireless config">Raspberry Pi Wireless config</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-06T00:57:30-05:00">
                Published: Sun 06 December 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/raspberrypi.html">raspberrypi</a> <a href="https://avolkov.github.io/tag/networking.html">networking</a> <a href="https://avolkov.github.io/tag/wireless.html">wireless</a> <a href="https://avolkov.github.io/tag/realtek.html">realtek</a> <a href="https://avolkov.github.io/tag/ralink.html">ralink</a> <a href="https://avolkov.github.io/tag/usb.html">usb</a> </p>
</footer><!-- /.post-info -->                <p>Here's working wireless configuration I use to connect my Raspberry Pis with USB wifi dongles to my home network.</p>
<p>I've been using Realtek RTL8188CUS and Ralink RT5370 based devices rated for 150Mbps.</p>
<p>Dongles based on Ralink chip have been working flawlessly, but I have experienced two issues with ...</p>
                <a class="readmore" href="https://avolkov.github.io/raspberry-pi-wireless-config.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>