<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>disparate notes - Alex Volkov</title>
        <link rel="stylesheet" href="https://avolkov.github.io/theme/css/main.css" />
        <link href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="disparate notes Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://avolkov.github.io/">disparate notes </a></h1>
                <nav><ul>
                    <li><a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a></li>
                    <li><a href="https://avolkov.github.io/category/misc.html">misc</a></li>
                    <li><a href="https://avolkov.github.io/category/testing.html">testing</a></li>
                    <li><a href="https://avolkov.github.io/category/tools.html">tools</a></li>
                    <li><a href="https://avolkov.github.io/category/web-application-development.html">web application development</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://avolkov.github.io/upgrading-from-old-version-of-gitlab-ce.html">Upgrading from old version of Gitlab CE</a></h1>
<footer class="post-info">
        <abbr class="published" title="2018-02-21T00:00:00-05:00">
                Published: Wed 21 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/git.html">git</a> <a href="https://avolkov.github.io/tag/gitlab.html">gitlab</a> </p>
</footer><!-- /.post-info --><p>I've came across an old instance of Gitlab running on CentOS 6.</p>
<p>The old instance version is 8.10.5 installed using omnibus package. The omnibus package contains Postgres database, which needs to be updated from 9.2.x used in 8.10 release to 9.6.x used in the current Gitlab 10.4.4.</p>
<p>The documentation is not entirely complete, as I be not many people are running Gitlab instance from 2015 that hasn't been updated. There are few mentions of  <cite>gitlab-ctl pg-upgrade</cite> command but the command is not available in Gitlab 8.10.5, trying to run that will provoke gitlab-ctl to give the following response -- &quot;i don't know that command&quot;</p>
<p>What I eventually figured out, and what needs to be done is to update to version 9.5.10 first -- that would update included postgres to 9.6.x</p>
<div class="highlight"><pre><span></span><span class="c1"># yum install gitlab-ce-9.5.10-ce.0.el6.x86_64.rpm</span>
</pre></div>
<p>Then update gitlab to the latest version.</p>
<div class="highlight"><pre><span></span><span class="c1"># yum install gitlab-ce</span>
</pre></div>
<div class="section" id="additional-notes">
<h2>Additional notes</h2>
<p>If you need to test backups for an old version of Gitlab, you can download and install that version of the package from here -- <a class="reference external" href="https://packages.gitlab.com/app/gitlab/gitlab-ce/search?filter=rpms&amp;q=gitlab-ce-8.10&amp;dist=">https://packages.gitlab.com/app/gitlab/gitlab-ce/search?filter=rpms&amp;q=gitlab-ce-8.10&amp;dist=</a></p>
<p>The package description for the specific package I'm using is here -- <a class="reference external" href="https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-8.10.5-ce.0.el6.x86_64.rpm">https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-8.10.5-ce.0.el6.x86_64.rpm</a></p>
<p>The page also contains installation instructions. Once download and install is finished, run reconfigure script.</p>
<div class="highlight"><pre><span></span><span class="c1"># gitlab-ctl reconfigure</span>
</pre></div>
<p>The script will create the location <strong>/var/opt/gitlab/backups/</strong> into which Gitlab backup files should be copied</p>
<p>Restore gitlab from backup using the following command</p>
<div class="highlight"><pre><span></span><span class="c1"># gitlab-rake gitlab:backup:restore</span>
</pre></div>
<p>Then reboot the system. This should get you to the point where it is possible to test Gitlab upgrade process.</p>
</div>
<div class="section" id="gpg-error">
<h2>GPG error</h2>
<p>Older version of Gitlab ship with unsigned packages and <strong>yum install</strong> command would refuse to run returning this error message -- &quot;Package is not signed&quot;.</p>
<p>A workaround is to set <strong>gpgcheck=0</strong> in <strong>/etc/yum.repos.d/gitlab_gitlab-ce.repo</strong></p>
</div>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/installing-python-packages-in-development-mode.html" rel="bookmark"
                           title="Permalink to Installing python packages in development mode">Installing python packages in development mode</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-01-02T00:00:00-05:00">
                Published: Mon 02 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/pip.html">pip</a> </p>
</footer><!-- /.post-info -->                <p class="first last">installing package requirements in development mode</p>

                <a class="readmore" href="https://avolkov.github.io/installing-python-packages-in-development-mode.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/pyramid-web-app-setup-with-with-postgres-sqlalchemy-and-alembic.html" rel="bookmark"
                           title="Permalink to Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.">Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-01-01T00:00:00-05:00">
                Published: Sun 01 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/web-application-development.html">web application development</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/pyramid.html">pyramid</a> <a href="https://avolkov.github.io/tag/postgres.html">postgres</a> <a href="https://avolkov.github.io/tag/sqlalchemy.html">sqlalchemy</a> <a href="https://avolkov.github.io/tag/alembic.html">alembic</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.</p>

                <a class="readmore" href="https://avolkov.github.io/pyramid-web-app-setup-with-with-postgres-sqlalchemy-and-alembic.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/grapical-tool-for-mercurial-similar-to-git-blame.html" rel="bookmark"
                           title="Permalink to Grapical tool for mercurial similar to git blame">Grapical tool for mercurial similar to git blame</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-12-17T00:00:00-05:00">
                Published: Sat 17 December 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/tools.html">tools</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/mercurial.html">mercurial</a> <a href="https://avolkov.github.io/tag/hg.html">hg</a> <a href="https://avolkov.github.io/tag/tools.html">tools</a> </p>
</footer><!-- /.post-info -->                <p class="first last">thg -- A handy GUI tool for looking up historical date</p>

                <a class="readmore" href="https://avolkov.github.io/grapical-tool-for-mercurial-similar-to-git-blame.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/testing-python-with-mock.html" rel="bookmark"
                           title="Permalink to Testing Python with Mock">Testing Python with Mock</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-12-17T00:00:00-05:00">
                Published: Sat 17 December 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/mock.html">mock</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Testing with mocks and less well know mock methods</p>

                <a class="readmore" href="https://avolkov.github.io/testing-python-with-mock.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/nose2-profiler-setup.html" rel="bookmark"
                           title="Permalink to Nose2 profiler setup">Nose2 profiler setup</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-17T00:00:00-05:00">
                Published: Thu 17 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/nose2.html">nose2</a> <a href="https://avolkov.github.io/tag/profiling.html">profiling</a> </p>
</footer><!-- /.post-info -->                <p class="first last">nose2 profiling configuration</p>

                <a class="readmore" href="https://avolkov.github.io/nose2-profiler-setup.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/cricket-awesome-ugly-test-visualizer.html" rel="bookmark"
                           title="Permalink to Cricket -- awesome ugly test visualizer">Cricket -- awesome ugly test visualizer</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-16T00:00:00-05:00">
                Published: Wed 16 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/cricket.html">cricket</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Cricket, a handy GUI tool for running tests in python</p>

                <a class="readmore" href="https://avolkov.github.io/cricket-awesome-ugly-test-visualizer.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/running-jenkins-in-docker.html" rel="bookmark"
                           title="Permalink to Running Jenkins in Docker">Running Jenkins in Docker</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-28T10:19:00-04:00">
                Published: Fri 28 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/jenkins.html">jenkins</a> <a href="https://avolkov.github.io/tag/docker.html">docker</a> <a href="https://avolkov.github.io/tag/debian.html">debian</a> </p>
</footer><!-- /.post-info -->                <p class="first last">setting up jenkins in docker</p>

                <a class="readmore" href="https://avolkov.github.io/running-jenkins-in-docker.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/linting-and-declaration-lookup-for-python-with-sublime-text-3.html" rel="bookmark"
                           title="Permalink to Linting and declaration lookup for Python with Sublime Text 3">Linting and declaration lookup for Python with Sublime Text 3</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-23T22:18:00-04:00">
                Published: Sun 23 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/sublime.html">sublime</a> <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/anaconda.html">anaconda</a> <a href="https://avolkov.github.io/tag/programming.html">programming</a> <a href="https://avolkov.github.io/tag/debian.html">debian</a> </p>
</footer><!-- /.post-info -->                <p>Recently I had to completely reset my Sublime Text 3 project settings and set everything up from scratch. I find the following two features the most important and need to be configured first:</p>
<ul class="simple">
<li>linting -- letting the computer keep track of consistent coding style</li>
<li>definition lookup -- letting the computer to look ...</li></ul>
                <a class="readmore" href="https://avolkov.github.io/linting-and-declaration-lookup-for-python-with-sublime-text-3.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/debian-automated-install.html" rel="bookmark"
                           title="Permalink to Debian Automated Install">Debian Automated Install</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-17T21:44:00-04:00">
                Published: Mon 17 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/debian.html">debian</a> <a href="https://avolkov.github.io/tag/automation.html">automation</a> <a href="https://avolkov.github.io/tag/preseeding.html">preseeding</a> </p>
</footer><!-- /.post-info -->                <p>A few days ago in my part of the talk at GTALUG <a class="footnote-reference" href="#id7" id="id1">[1]</a>  I mentioned using Debian automated install <a class="footnote-reference" href="#id8" id="id2">[2]</a> to quickly bring up fully virtualized systems, as one of possible methods of system deployment or testing Ansible scripts.</p>
<p>This idea worked so well that I made a youtube video ...</p>
                <a class="readmore" href="https://avolkov.github.io/debian-automated-install.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 2
        <a href="https://avolkov.github.io/author/alex-volkov2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/a_volkov">twitter</a></li>
                            <li><a href="http://flamy.ca">homepage</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-87694404-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>