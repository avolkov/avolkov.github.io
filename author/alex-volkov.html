<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>disparate notes - Alex Volkov</title>
        <link rel="stylesheet" href="https://avolkov.github.io/theme/css/main.css" />
        <link href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="disparate notes Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://avolkov.github.io/">disparate notes </a></h1>
                <nav><ul>
                    <li><a href="https://avolkov.github.io/category/ci.html">ci,</a></li>
                    <li><a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a></li>
                    <li><a href="https://avolkov.github.io/category/misc.html">misc</a></li>
                    <li><a href="https://avolkov.github.io/category/testing.html">testing</a></li>
                    <li><a href="https://avolkov.github.io/category/tools.html">tools</a></li>
                    <li><a href="https://avolkov.github.io/category/web-application-development.html">web application development</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://avolkov.github.io/quick-gitlab-runner-setup.html">Quick gitlab runner setup</a></h1>
<footer class="post-info">
        <abbr class="published" title="2018-05-01T00:00:00-04:00">
                Published: Tue 01 May 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/ci.html">ci,</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/gitlab.html">gitlab</a> <a href="https://avolkov.github.io/tag/git-plone.html">git. plone</a> <a href="https://avolkov.github.io/tag/gitlab-ci.html">gitlab ci</a> <a href="https://avolkov.github.io/tag/ci.html">ci</a> </p>
</footer><!-- /.post-info --><p>Gitlab runner is a continuous integration tool that I've found it to be a lot easier than Jenkins to wrap my head around when it comes to deploying source code to demo machines.</p>
<p>In this scenario gitlab runner it pulls per-project source code to a runner machine then executes any of the commands specified in <cite>.gitlab-ci.yml</cite> from source code root directory.</p>
<p>Here's a sample configuration of updating source code on buildout-based Plone 5 project:</p>
<div class="highlight"><pre><span></span>stages:
  - deploy
001 stop plone server:
  stage: deploy
  script:
    - ./bin/supervisorctl shutdown
  cache:
    paths:
      - .installed.cfg
      - bin/*
      - develop-eggs/*
      - downloads/*
      - eggs/*
      - parts/*
      - var/*
002 rebuild project:
  stage: deploy
  script:
    - ./bin/buildout -v -c buildout_prod.cfg
    - ./bin/supervisord
  cache:
    paths:
      - .installed.cfg
      - bin/*
      - develop-eggs/*
      - downloads/*
      - eggs/*
      - parts/*
      - var/*
</pre></div>
<p>I've been repeating a task of installing a runner for a particular projects -- setting up a gitlab runner, and I've found it to be spread over at least 3 documents:</p>
<ul class="simple">
<li><a class="reference external" href="https://docs.gitlab.com/runner/install/linux-repository.html">Install GitLab Runner using the official GitLab repositories</a></li>
<li><a class="reference external" href="https://docs.gitlab.com/runner/register/index.html">Registering runners</a></li>
<li><a class="reference external" href="https://docs.gitlab.com/runner/commands/README.html">Gitlab Runner commands</a></li>
</ul>
<p>To get runner installed and registered, the following steps should be taken:</p>
<ol class="arabic simple">
<li>Add gitlab-runner repo</li>
</ol>
<p>CentOS 7</p>
<div class="highlight"><pre><span></span># curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash
</pre></div>
<p>Debian</p>
<div class="highlight"><pre><span></span># curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash
</pre></div>
<ol class="arabic simple" start="2">
<li>Install gitlab-runner package</li>
</ol>
<p>CentOS 7</p>
<div class="highlight"><pre><span></span># yum install gitlab-runner
</pre></div>
<p>Debian</p>
<div class="highlight"><pre><span></span># apt-get install gitlab-runner
</pre></div>
<ol class="arabic simple" start="3">
<li>Remove default gitlab-runner configuration (as root) and run it as a selected user. This step is not required if you're using default configuration, but in my case I have already setup environment for user 'alex' and it is a lot easier to run jobs there.</li>
</ol>
<div class="highlight"><pre><span></span># gitlab-runner uninstall
# gitlab-runner install --working-directory=/home/alex --user=alex
</pre></div>
<ol class="arabic simple" start="4">
<li>Register gitlab runner with a gitlab server</li>
</ol>
<div class="highlight"><pre><span></span># gitlab-runner register
</pre></div>
<p>For the last step the registration information is found in <cite>&lt;gitlab server&gt;/admin/runners</cite></p>
<img alt="gitlab runner token info" class="align-center" src="images/0005_gitab_ci_runner.png" style="width: 600px;" />
<p>This document provides instructions on how to lock shared runners to specific projects -- <a class="reference external" href="https://docs.gitlab.com/ee/ci/runners/">https://docs.gitlab.com/ee/ci/runners/</a></p>
                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/upgrading-from-old-version-of-gitlab-ce.html" rel="bookmark"
                           title="Permalink to Upgrading from old version of Gitlab CE">Upgrading from old version of Gitlab CE</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-21T00:00:00-05:00">
                Published: Wed 21 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/git-gitlab.html">git gitlab</a> </p>
</footer><!-- /.post-info -->                <p>I've came across an old instance of Gitlab running on CentOS 6.</p>
<p>The old instance version is 8.10.5 installed using omnibus package. The omnibus package contains Postgres database, which needs to be updated from 9.2.x used in 8.10 release to 9.6.x used in …</p>
                <a class="readmore" href="https://avolkov.github.io/upgrading-from-old-version-of-gitlab-ce.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/installing-python-packages-in-development-mode.html" rel="bookmark"
                           title="Permalink to Installing python packages in development mode">Installing python packages in development mode</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-01-02T00:00:00-05:00">
                Published: Mon 02 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/debugging-python-programs.html">debugging python programs</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/pip.html">pip</a> </p>
</footer><!-- /.post-info -->                <p class="first last">installing package requirements in development mode</p>

                <a class="readmore" href="https://avolkov.github.io/installing-python-packages-in-development-mode.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/pyramid-web-app-setup-with-with-postgres-sqlalchemy-and-alembic.html" rel="bookmark"
                           title="Permalink to Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.">Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-01-01T00:00:00-05:00">
                Published: Sun 01 January 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/web-application-development.html">web application development</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/pyramid.html">pyramid</a> <a href="https://avolkov.github.io/tag/postgres.html">postgres</a> <a href="https://avolkov.github.io/tag/sqlalchemy.html">sqlalchemy</a> <a href="https://avolkov.github.io/tag/alembic.html">alembic</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Pyramid web app setup with with Postgres, SQLAlchemy and Alembic.</p>

                <a class="readmore" href="https://avolkov.github.io/pyramid-web-app-setup-with-with-postgres-sqlalchemy-and-alembic.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/grapical-tool-for-mercurial-similar-to-git-blame.html" rel="bookmark"
                           title="Permalink to Grapical tool for mercurial similar to git blame">Grapical tool for mercurial similar to git blame</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-12-17T00:00:00-05:00">
                Published: Sat 17 December 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/tools.html">tools</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/mercurial.html">mercurial</a> <a href="https://avolkov.github.io/tag/hg.html">hg</a> <a href="https://avolkov.github.io/tag/tools.html">tools</a> </p>
</footer><!-- /.post-info -->                <p class="first last">thg -- A handy GUI tool for looking up historical date</p>

                <a class="readmore" href="https://avolkov.github.io/grapical-tool-for-mercurial-similar-to-git-blame.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/testing-python-with-mock.html" rel="bookmark"
                           title="Permalink to Testing Python with Mock">Testing Python with Mock</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-12-17T00:00:00-05:00">
                Published: Sat 17 December 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/mock.html">mock</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Testing with mocks and less well know mock methods</p>

                <a class="readmore" href="https://avolkov.github.io/testing-python-with-mock.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/nose2-profiler-setup.html" rel="bookmark"
                           title="Permalink to Nose2 profiler setup">Nose2 profiler setup</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-17T00:00:00-05:00">
                Published: Thu 17 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/nose2.html">nose2</a> <a href="https://avolkov.github.io/tag/profiling.html">profiling</a> </p>
</footer><!-- /.post-info -->                <p class="first last">nose2 profiling configuration</p>

                <a class="readmore" href="https://avolkov.github.io/nose2-profiler-setup.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/cricket-awesome-ugly-test-visualizer.html" rel="bookmark"
                           title="Permalink to Cricket -- awesome ugly test visualizer">Cricket -- awesome ugly test visualizer</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-16T00:00:00-05:00">
                Published: Wed 16 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/testing.html">testing</a> <a href="https://avolkov.github.io/tag/cricket.html">cricket</a> </p>
</footer><!-- /.post-info -->                <p class="first last">Cricket, a handy GUI tool for running tests in python</p>

                <a class="readmore" href="https://avolkov.github.io/cricket-awesome-ugly-test-visualizer.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/running-jenkins-in-docker.html" rel="bookmark"
                           title="Permalink to Running Jenkins in Docker">Running Jenkins in Docker</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-28T10:19:00-04:00">
                Published: Fri 28 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/testing.html">testing</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/jenkins.html">jenkins</a> <a href="https://avolkov.github.io/tag/docker.html">docker</a> <a href="https://avolkov.github.io/tag/debian.html">debian</a> </p>
</footer><!-- /.post-info -->                <p class="first last">setting up jenkins in docker</p>

                <a class="readmore" href="https://avolkov.github.io/running-jenkins-in-docker.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://avolkov.github.io/linting-and-declaration-lookup-for-python-with-sublime-text-3.html" rel="bookmark"
                           title="Permalink to Linting and declaration lookup for Python with Sublime Text 3">Linting and declaration lookup for Python with Sublime Text 3</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-10-23T22:18:00-04:00">
                Published: Sun 23 October 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://avolkov.github.io/author/alex-volkov.html">Alex Volkov</a>
        </address>
<p>In <a href="https://avolkov.github.io/category/misc.html">misc</a>.</p>
<p>tags: <a href="https://avolkov.github.io/tag/sublime.html">sublime</a> <a href="https://avolkov.github.io/tag/python.html">python</a> <a href="https://avolkov.github.io/tag/anaconda.html">anaconda</a> <a href="https://avolkov.github.io/tag/programming.html">programming</a> <a href="https://avolkov.github.io/tag/debian.html">debian</a> </p>
</footer><!-- /.post-info -->                <p>Recently I had to completely reset my Sublime Text 3 project settings and set everything up from scratch. I find the following two features the most important and need to be configured first:</p>
<ul class="simple">
<li>linting -- letting the computer keep track of consistent coding style</li>
<li>definition lookup -- letting the computer to look …</li></ul>
                <a class="readmore" href="https://avolkov.github.io/linting-and-declaration-lookup-for-python-with-sublime-text-3.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 2
        <a href="https://avolkov.github.io/author/alex-volkov2.html">&raquo;</a>
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://avolkov.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/a_volkov">twitter</a></li>
                            <li><a href="http://flamy.ca">homepage</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-87694404-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>